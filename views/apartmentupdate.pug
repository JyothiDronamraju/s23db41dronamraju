extends layout

block content
    h1= title
    if (toShow == null)
        h2 No instance to delete
    else
        - let apartmentid = toShow._id
        - let apartment_name = toShow.apartment_name
        - let location = toShow.location
        - let rent = toShow.rent
        div.row(class='mb-2')
            div.mr-1 ID is
            div #{apartmentid}
        - let actionid = "/resource/apartments/" + apartmentid
        form(id='ApartmentForm', action= actionid, method="PUT")
            div.form-group
                label.apartmentAttr(for='apartment_name') Apartment name
                input#apartment_name.form-control(type='text', name='apartment_name', value= apartment_name)
            div.form-group
                label.apartmentAttr(for='location') Location
                input#location.form-control(type='text', name='location', value= location)
            div.form-group
                label.apartmentAttr(for='rent') Rent
                input#rent.form-control(type='number', name='rent', value= rent)
            button.btn.btn-primary(type="submit") Update
        script.
            document.forms['ApartmentForm'].addEventListener('submit', (event) => {
                event.preventDefault();
                // TODO: Add a loading state or visual indication that the form is being submitted
                fetch(event.target.action, {
                    method: 'PUT',
                    body: new URLSearchParams(new FormData(event.target))
                })
                .then((resp) => {
                    return resp.json();
                })
                .then((body) => {
                    alert("Update succeeded");
                    // TODO: Handle the response or redirect if needed
                })
                .catch((error) => {
                    alert("Update failed " + error);
                });
            });
